<!DOCTYPE html>
<html>
<head>
    <title>Sistema de Estoque</title>
    <style>
        body {
            font-family: Arial;
            margin: 40px;
        }

        input {
            margin: 5px;
        }

        button {
            margin: 5px;
        }

        table {
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            border: 1px solid black;
            padding: 8px;
        }
    </style>
</head>
<body>

    <h1>Sistema de Estoque</h1>

    <h2>Cadastrar Produto</h2>

    <input type="text" id="nome" placeholder="Nome" />
    <input type="number" id="preco" placeholder="Preço" />
    <input type="number" id="estoque" placeholder="Estoque" />
    <button onclick="criarProduto()">Salvar</button>

    <h2>Lista de Produtos</h2>

    <button onclick="listarProdutos()">Atualizar Lista</button>

    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Preço</th>
                <th>Estoque</th>
            </tr>
        </thead>
        <tbody id="tabelaProdutos"></tbody>
    </table>

<script>
    const apiUrl = "https://localhost:7130/api/Produtos";

    async function listarProdutos() {
        const response = await fetch(apiUrl);
        const produtos = await response.json();

        const tabela = document.getElementById("tabelaProdutos");
        tabela.innerHTML = "";

        produtos.forEach(produto => {
            tabela.innerHTML += `
                <tr>
                    <td>${produto.id}</td>
                    <td>${produto.nome}</td>
                    <td>${produto.preco}</td>
                    <td>${produto.estoque}</td>
                </tr>
            `;
        });
    }

    async function criarProduto() {
        const nome = document.getElementById("nome").value;
        const preco = parseFloat(document.getElementById("preco").value);
        const estoque = parseInt(document.getElementById("estoque").value);

        await fetch(apiUrl, {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({ nome, preco, estoque })
        });

        listarProdutos();
    }
</script>

</body>
</html>
